<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Pedido - Distribuidora San Martín</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/estilos-generales.css">
    <link rel="stylesheet" href="css/finalizarPedido.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <header>
        <div class="container-fluid text-center background-rojo text-white fs-5 py-3 fw-bold">
            Compra mínima en la Web: S/. 300.00
        </div>
        <div class="banner">
            <div class="banner-window">
                <div class="banner-track">
                    <!-- Contenido duplicado para el bucle-->
                    <div class="banner-item"><i class="bi bi-envelope-at"></i> pedidos@distribuidoraSanMartin.com.ar</div>
                    <div class="banner-item"><i class="bi bi-telephone-outbound"></i> Teléfono: 3424440263</div>
                    <div class="banner-item"><i class="bi bi-geo-alt"></i> Direccion: 11001 Pachacutec, Carretera de Tate, Ica</div>

                    <div class="banner-item"><i class="bi bi-envelope-at"></i> pedidos@distribuidoraSanMartin.com.ar</div>
                    <div class="banner-item"><i class="bi bi-telephone-outbound"></i> Teléfono: 3424440263</div>
                    <div class="banner-item"><i class="bi bi-geo-alt"></i> Direccion: 11001 Pachacutec, Carretera de Tate, Ica</div>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row mb-3 mx-0 mx-lg-5">
                <div class="col-md-2 text-start text-lg-end mt-2">
                    <a href="index.html"><img style="height: 90px; width: auto;" src="img/index/logo empresa.png" alt="Logo de la empresa"></a>
                </div>
                
                <div class="col-md-5 mt-3 ms-0 ms-lg-0" style="display: flex; align-self: center; flex-direction: row;">

                    <input type="text" id="textoBuscado" placeholder="¿Qué estás buscando?"  style="width:100%;border: 1px solid #E21318; border-radius: 5px; border-bottom-right-radius: 0px; border-top-right-radius: 0px; height: 40px; padding: 10px">
                    <div class="text-center" style="background: #E21318; width: 40px; height: 40px; border-radius: 5px; border-bottom-left-radius: 0px; border-top-left-radius: 0px; cursor: pointer">
                        <span id="botonBusqueda"><i class="bi bi-search" style="font-size: 18px; line-height: 40px; color: #fff"></i></span>
                    </div>

                </div>
                
                <div class="col-md-5 mt-3 d-flex justify-content-start justify-content-md-end" style="flex-direction: row; align-self: center">

                    <div class="text-center" style=" height: 50px;margin-right:5px">
                        <!--Este botón abre el modal del carrito de compras-->
                        <button class="btn btn-outline-dark py-3 px-xxl-5" data-bs-toggle="modal" data-bs-target="#cartModal"  style="width:100%;" type="button">CARRITO <i class="bi bi-cart2" style="height: 16px; margin-left: 10px;"></i></button>
                    </div>
                    <div class="text-center" id="seccionUsuario" style=" height: 50px;margin-right:5px">
                        <a href="login.html"><button type="button" class="btn btn-outline-danger py-3 px-xxl-5 backgroundHover-rojo" style="width:100%;">INGRESAR</button></a>
                    </div>
                </div>                
            </div>
        </div>

        <!--Barra de navegación-->
        <nav class="navbar navbar-expand-lg bg-transparent">
            <div class="container">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item me-3 ms-0 ms-xl-5">
                            <!-- menú desplegable de productos -->
                            <div class="dropdown">
                                <button class="btn btn-danger background-rojo fw-bold mt-3 mt-lg-0 ms-3 ms-lg-0 dropdown-toggle" style="width:100%;height:45px" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                PRODUCTOS
                                </button>
                                <ul class="dropdown-menu ms-3 ms-lg-0 menuProductos">
                                    <!--Las categorias y subcategorias se cargan de la BD-->
                                </ul>
                            </div>
                        </li>
                        <li class="nav-item mx-3">
                        <a class="nav-link active fw-bold" aria-current="page" href="index.html">HOME</a>
                        </li>
                        <li class="nav-item mx-3">
                        <a class="nav-link fw-bold" href="quienes-somos.html">¿QUIÉNES SOMOS?</a>
                        </li>
                        <li class="nav-item mx-3">
                        <a class="nav-link fw-bold" href="sucursales.html">SUCURSALES</a>
                        </li>
                        <li class="nav-item mx-3">
                        <a class="nav-link fw-bold" href="preguntas.html">PREGUNTAS FRECUENTES</a>
                        </li>
                        <li class="nav-item mx-3">
                        <a class="nav-link fw-bold" href="cambio y devolucion.html">CAMBIO Y DEVOLUCIÓN</a>
                        </li>
                        <li class="nav-item ms-3">
                            <a href="misPedidos.html">
                            <button type="button" class="btn btn-dark fw-bold py-2 py-lg-1 py-xl-2" style="width:100%;"><i class="bi bi-eye"></i> VER PEDIDOS</button>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <!--Final del header-->
    
    <div class="container-fluid text-center background-rojo text-white fs-2 py-4 mt-5 shadow-banner">
        <span class="fw-bold">CONFIRMANDO PEDIDO</span>
    </div>

    <!--Contenedor de los productos del pedido-->
    <div class="container" style="width:60vw;" id="contenedor-pedido">
        <p class="fs-1 fw-bold mt-5">MI PEDIDO</p>
        <div id="pedidoItems"></div>
        <div class="d-flex justify-content-between w-100 fs-3 mt-5 py-3 ps-2 pe-3 background-totalPedido shadow-sm">
            <strong class="fw-medium">SUBTOTAL:</strong>
            <strong class="fw-medium" id="TotalPedido">$0</strong>
        </div>
        <div class="d-flex justify-content-between w-100 fs-3 ps-2 pe-3 py-3 background-descuento shadow-sm">
            <strong class="fw-medium">DESCUENTO:</strong>
            <strong class="fw-medium" id="descuentoPedido">$0</strong>
        </div>
        <div class="d-flex justify-content-between w-100 fs-3 py-3 ps-2 pe-3 background-totalPedido shadow-sm">
            <strong class="fw-bold">TOTAL:</strong>
            <strong class="fw-bold" id="TotalPedidoNeto">S/.0</strong>
        </div>
    </div>

    <!--Formulario de los datos del cliente-->
    <div class="container mt-5 informacion-pedido">
        <h1 class="fw-bold my-5">INFORMACIÓN DEL PEDIDO</h1>
        <h2 class="fw-semibold my-5" id="datosPersonales">DATOS PERSONALES</h2>
        <form class="row g-4" id="formPedido">

            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control info-input" id="nombreUserPedido" placeholder="Nombre y Apellido..." required readonly>
                    <label for="floatingInput" class="info-label">Nombre y Apellido</label>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <input type="email" class="form-control info-input" id="emailUserPedido" placeholder="Email..." required readonly>
                    <label for="floatingPassword" class="info-label">Email</label>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control info-input" id="telefonoUserPedido" placeholder="Teléfono..." required readonly>
                    <label for="floatingInput" class="info-label">Teléfono</label>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control info-input" id="dniUserPedido" placeholder="Número de Documento..." required readonly>
                    <label for="floatingPassword" class="info-label">Número de Documento</label>
                </div>
            </div>


            <h2 class="fw-semibold mt-5 mb-4" id="datosEnvio">DATOS DE ENVÍO</h2>

            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <select class="form-select info-input" id="regionPedido" required>
                    <option selected disabled>Seleccione una Región</option>
                    </select>
                    <label for="regionPedido">Región</label>
                </div>
            </div>

            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <select class="form-select info-input" id="provinciaPedido" required disabled>
                    <option selected disabled>Seleccione una Provincia</option>
                    </select>
                    <label for="provinciaPedido">Provincia</label>
                </div>
            </div>

            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <select class="form-select info-input" id="distritoPedido" required disabled>
                    <option selected disabled>Seleccione un Distrito</option>
                    </select>
                    <label for="distritoPedido">Distrito</label>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control info-input" id="codPostalPedido" placeholder="Código Postal..." required>
                    <label for="floatingPassword" class="info-label">Código Postal</label>
                </div>
            </div>
            <div class="col-12 col-sm-6 col-lg-4">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control info-input" id="direccionPedido" placeholder="Direccion..." required>
                    <label for="floatingPassword" class="info-label">Direccion</label>
                </div>
            </div>
            <div class="col-12"> 
                <div class="form-floating">
                    <textarea class="form-control info-input" placeholder="Deja un comentario aqui..." id="observacionesPedido" style="height: 180px"></textarea>
                    <label for="floatingTextarea2">Observaciones...</label>
                </div>
            </div>

            <div class="col-12 text-center text-sm-end mt-5 pt-4">
                <button type="submit" id="botonConfirmarPedido" class="btn btn-danger background-rojo fw-bold py-3 px-5"><span class="mx-4 fs-5">CONFIRMAR PEDIDO</span></button>
            </div>

        </form>
    </div>
    <!-- Fin formulario  -->

    <!-- Footer -->
    <footer>
        <div class="background-rojo text-white py-3 footer-red-section">
            <div class="container">

                <div class="row justify-content-around align-items-center text-center">
                    <div class="col-12 col-md-5 me-5 d-flex justify-content-around align-items-center footer-social">
                        <a href="#"><i class="fab fa-facebook fa-3x footer-icon-large"></i></a>
                        <a href="#"><i class="fab fa-instagram fa-3x footer-icon-large"></i></a>
                        <a href="#"><i class="fab fa-whatsapp fa-3x footer-icon-large"></i></a>
                    </div>

                    
                    <div class="col-12 col-md-5 ms-0 ms-sm-5 d-flex justify-content-around justify-content-sm-end align-items-center footer-extra">
                        <div class="text-center mx-0 mx-sm-5 mt-4 mt-sm-0">
                        <img src="https://cdn-icons-png.flaticon.com/512/5949/5949054.png" alt="Envios" class="footer-icon-img-large">
                        <p class="mt-2 mb-0">Envíos a Domicilio</p>
                        </div>
                        <div class="text-center mx-0  mx-sm-5 mt-4 mt-sm-0">
                        <img src="https://img.freepik.com/vector-premium/icono-navegacion-tienda-graficos-vectoriales-negro_1178600-1146.jpg?w=360" alt="Sucursales" class="footer-icon-img-large">
                        <p class="mt-2 mb-0">3 Sucursales</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="map-container">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3868.826080156572!2d-75.69865572531693!3d-14.146320384537802!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x91111fb2e3d06aa1%3A0xd219a3bef67ea7df!2sFUNDO%20Y%20BODEGA%20%22SAN%20MART%C3%8DN%22!5e0!3m2!1ses!2spe!4v1758150524201!5m2!1ses!2spe" 
                width="100%" 
                height="450" 
                style="border:0;" 
                allowfullscreen="" 
                loading="lazy" 
                referrerpolicy="no-referrer-when-downgrade">
            </iframe>
        </div>

        <div class="bg-black text-white fs-5 py-4 ps-0 ps-sm-5 text-center d-flex flex-column flex-md-row justify-content-start align-items-center gap-2">
            <span class="ms-0 ms-sm-5">&copy; Copyright</span>
            <span> Todos Los Derechos Reservados.</span>
        </div>
    </footer>

    <!-- Modal del carrito -->
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header text-white">
                    <h5 class="modal-title">MI PEDIDO</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body cart-body">
                    <div id="cartItems"></div>
                </div>
                <div class="modal-footer flex-column cart-footer w-100">
                    <div class="d-flex justify-content-between w-100 mb-2 px-3">
                        <strong>TOTAL:</strong>
                        <strong id="cartTotal">$0</strong>
                    </div>
                    <div class="d-flex flex-wrap justify-content-between w-100">
                        <button class="btn btn-outline-dark me-2 flex-fill" data-bs-dismiss="modal">SEGUIR PIDIENDO</button>
                        <button class="btn btn-outline-secondary me-2 flex-fill" onclick="finalizarPedido()">FINALIZAR PEDIDO</button>
                        <button class="btn btn-outline-danger flex-fill" onclick="vaciarCarrito()">VACIAR CARRITO</button>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Botones flotantes -->
    <div class="botones-flotantes">
        <!-- Volver arriba -->
        <button class="btn-volver-arriba" id="btnArriba">
            <i class="bi bi-arrow-up"></i>
        </button>
        <!-- Carrito -->  
        <button class="btn-flotante carrito" id="btnCarrito" data-bs-toggle="modal" data-bs-target="#cartModal">
            <i class="bi bi-cart3"></i>
            <span class="texto-boton">Abrir carrito de pedido</span>
        </button>
        <!-- WhatsApp -->
        <a href="https://wa.me/51956190217" target="_blank" class="btn-flotante whatsapp">
            <i class="bi bi-whatsapp"></i>
            <span class="texto-boton">¡Consultanos por Whatsapp!</span>
        </a>
    </div>

    <!-- modal para mensajes al usuario -->
    <div id="modalMensaje" class="modal-mensaje">
        <div class="modal-contenidoMensaje">
            <button class="modal-close">&times;</button>
            <h2 id="modal-titulo"></h2>
            <p id="modal-info"></p>
        </div>
    </div>

    <!-- Modal Datos Personales -->
        <div class="modal fade" id="modalDatosUsuario" tabindex="-1" aria-labelledby="modalDatosUsuarioLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content shadow-lg border-0">

                <div class="modal-header py-3" style="background-color: rgb(228, 30, 30); color: white;">
                    <h5 class="modal-title fw-bold w-100 text-center" id="modalDatosUsuarioLabel">
                    Datos personales de la cuenta
                    </h5>
                </div>

                <div class="modal-body px-4 py-3" id="cuerpoModalDatosUsuario">
                    <form id="formDatosUsuario" class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Nombre</label>
                        <input type="text" id="nombreUsuario" class="form-control input-datos" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Correo</label>
                        <input type="email" id="correoUsuario" class="form-control input-datos" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">Teléfono</label>
                        <input type="text" id="telefonoUsuario" class="form-control input-datos" readonly>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-semibold">DNI</label>
                        <input type="text" id="dniUsuario" class="form-control input-datos" readonly>
                    </div>
                    </form>
                </div>

                <div class="modal-footer d-flex justify-content-between">
                    <button type="button" class="btn btn-secondary px-4" data-bs-dismiss="modal">Cerrar</button>
                    <div>
                    <button id="btnCambiarDatos" class="btn btn-danger px-4">Cambiar datos</button>
                    <button id="btnConfirmarCambios" class="btn btn-success px-4 d-none">Confirmar cambios</button>
                    </div>
                </div>

                </div>
            </div>
        </div>


    <script src="javaScript/funcionalidades.js"></script>
    <script src="javaScript/finalizarPedido.js"></script>
    <script src="javaScript/cargarCategorias.js"></script>
    <script src="https://checkout.culqi.com/js/v4"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>